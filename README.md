## Description

[Nest](https://github.com/nestjs/nest) framework TypeScript starter repository.

## Installation

```bash
$ npm install
```

## Running the app

```bash
# development
$ npm run start

# watch mode
$ npm run start:dev

# production mode
$ npm run start:prod
```

## .env
Please note there is a .env used to set an RPC_URL
see ```.env.example``` in root

## endpoints:
Note that backend should be connected to local rpc node and governor contract should be deployed.
```POST('/create-proposal')```

```json
{
    "description": "some description",
    "governorAddress": "0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0",
    "from": "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266"
}
```
Response:
```json
{
    "transactionHash": "0xec6a2a3cbc943c8b99d26d3daa2a3075598970f2cf2cf88f20210e458d6e74f4",
    "transactionIndex": 0,
    "blockHash": "0x5a78f988c7781fa1b64554534ac12554ac87f48690017d672d102fc5c2312957",
    "blockNumber": 9,
    "from": "0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266",
    "to": "0x9fe46736679d2d9a65f0992f2272de9f3c7fa6e0",
    "cumulativeGasUsed": 69200,
    "gasUsed": 69200,
    "contractAddress": null,
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040200000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000",
    "type": "0x2",
    "status": true,
    "effectiveGasPrice": 2822756653,
    "events": {
        "ProposalCreated": {
            "removed": false,
            "logIndex": 0,
            "transactionIndex": 0,
            "transactionHash": "0xec6a2a3cbc943c8b99d26d3daa2a3075598970f2cf2cf88f20210e458d6e74f4",
            "blockHash": "0x5a78f988c7781fa1b64554534ac12554ac87f48690017d672d102fc5c2312957",
            "blockNumber": 9,
            "address": "0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0",
            "id": "log_fdf389b5",
            "returnValues": {
                "0": "48276286960099511652178304197831064242129192188018257283515451348301735306320",
                "1": "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
                "2": [
                    "0x388C818CA8B9251b393131C08a736A67ccB19297"
                ],
                "3": [
                    "0"
                ],
                "4": [
                    ""
                ],
                "5": [
                    "0xa9059cbb00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c800000000000000000000000000000000000000000000000000000000000003e8"
                ],
                "6": "9",
                "7": "50409",
                "8": "some description",
                "proposalId": "48276286960099511652178304197831064242129192188018257283515451348301735306320",
                "proposer": "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266",
                "targets": [
                    "0x388C818CA8B9251b393131C08a736A67ccB19297"
                ],
                "values": [
                    "0"
                ],
                "signatures": [
                    ""
                ],
                "calldatas": [
                    "0xa9059cbb00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c800000000000000000000000000000000000000000000000000000000000003e8"
                ],
                "voteStart": "9",
                "voteEnd": "50409",
                "description": "some description"
            },
            "event": "ProposalCreated",
            "signature": "0x7d84a6263ae0d98d3329bd7b46bb4e8d6f98cd35a7adb45c274c8b7fd5ebd5e0",
            "raw": {
                "data": "0x6abb68fd3f5d83764002279af03f1c79ece02b6a8c5eefe50938327864f4a450000000000000000000000000f39fd6e51aad88f6f4ce6ab8827279cfffb922660000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000000000000c4e900000000000000000000000000000000000000000000000000000000000002c00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000388c818ca8b9251b393131c08a736a67ccb1929700000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000044a9059cbb00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c800000000000000000000000000000000000000000000000000000000000003e8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010736f6d65206465736372697074696f6e00000000000000000000000000000000",
                "topics": [
                    "0x7d84a6263ae0d98d3329bd7b46bb4e8d6f98cd35a7adb45c274c8b7fd5ebd5e0"
                ]
            }
        }
    }
}
```

A proposal should be created before executing a vote.
proposalId is obtainable from ```GET('/get-proposals')``` or frontend

```POST('/vote')```
```json
{
    "voteOption": 1,
    "proposalId": "48276286960099511652178304197831064242129192188018257283515451348301735306320",
    "governorAddress": "0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0",
    "from": "0x70997970C51812dc3A010C7d01b50e0d17dc79C8"
}
```

Response:
```json
{
    "transactionHash": "0x20b3454246816f837e9039690d062a02cf6350ed2f056d70a858dbb9332668d4",
    "transactionIndex": 0,
    "blockHash": "0xba4785554366bddfd89c2aa6723123e49a72c6510eee1fa8a5f4b9f59f9d07ed",
    "blockNumber": 6,
    "from": "0x70997970c51812dc3a010c7d01b50e0d17dc79c8",
    "to": "0x9fe46736679d2d9a65f0992f2272de9f3c7fa6e0",
    "cumulativeGasUsed": 60637,
    "gasUsed": 60637,
    "contractAddress": null,
    "logsBloom": "0x00008000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040200000000000000000000000000000000000000000000000000000000000000000000000000000000000000800080000000000000000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000400000000000000000",
    "type": "0x2",
    "status": true,
    "effectiveGasPrice": 2980911348,
    "events": {
        "VoteCast": {
            "removed": false,
            "logIndex": 0,
            "transactionIndex": 0,
            "transactionHash": "0x20b3454246816f837e9039690d062a02cf6350ed2f056d70a858dbb9332668d4",
            "blockHash": "0xba4785554366bddfd89c2aa6723123e49a72c6510eee1fa8a5f4b9f59f9d07ed",
            "blockNumber": 6,
            "address": "0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0",
            "id": "log_41c3dafe",
            "returnValues": {
                "0": "0x70997970C51812dc3A010C7d01b50e0d17dc79C8",
                "1": "48276286960099511652178304197831064242129192188018257283515451348301735306320",
                "2": "1",
                "3": "0",
                "4": "",
                "voter": "0x70997970C51812dc3A010C7d01b50e0d17dc79C8",
                "proposalId": "48276286960099511652178304197831064242129192188018257283515451348301735306320",
                "support": "1",
                "weight": "0",
                "reason": ""
            },
            "event": "VoteCast",
            "signature": "0xb8e138887d0aa13bab447e82de9d5c1777041ecd21ca36ba824ff1e6c07ddda4",
            "raw": {
                "data": "0x6abb68fd3f5d83764002279af03f1c79ece02b6a8c5eefe50938327864f4a4500000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000",
                "topics": [
                    "0xb8e138887d0aa13bab447e82de9d5c1777041ecd21ca36ba824ff1e6c07ddda4",
                    "0x00000000000000000000000070997970c51812dc3a010c7d01b50e0d17dc79c8"
                ]
            }
        }
    }
}
```
